Version 4
SHEET 1 880 680
WIRE 384 -128 384 -176
WIRE 384 -16 384 -48
WIRE 384 -16 192 -16
WIRE 384 16 384 -16
WIRE 192 32 192 -16
WIRE -32 96 -96 96
WIRE 112 96 48 96
WIRE 144 96 112 96
WIRE 272 96 240 96
WIRE 272 128 272 96
WIRE 384 128 384 96
WIRE 112 160 112 96
WIRE -96 208 -96 96
WIRE -96 208 -144 208
WIRE -80 208 -96 208
WIRE 48 208 32 208
WIRE 224 208 128 208
WIRE 224 288 224 208
WIRE 288 288 224 288
WIRE 384 288 288 288
WIRE 448 288 384 288
WIRE 576 288 528 288
WIRE 288 320 288 288
WIRE 576 320 576 288
WIRE -80 352 -144 352
WIRE 112 352 -16 352
WIRE 224 352 224 288
WIRE 224 352 112 352
WIRE 112 416 112 352
WIRE 128 416 112 416
WIRE 288 416 288 384
WIRE 288 416 208 416
WIRE 288 448 288 416
WIRE 384 448 384 288
WIRE 384 464 384 448
WIRE 288 528 288 512
WIRE 336 528 288 528
WIRE 384 528 384 512
WIRE 384 528 336 528
WIRE 336 544 336 528
FLAG -144 208 Bat
FLAG -144 352 ICSP
FLAG 384 -176 ICSP
FLAG 384 128 0
FLAG 272 128 0
FLAG 576 320 0
FLAG -464 16 Bat
FLAG -464 -144 ICSP
FLAG -464 -64 0
FLAG -464 96 0
FLAG 336 544 0
FLAG 384 288 VLoad
SYMBOL nmos 32 160 M90
SYMATTR InstName M1
SYMATTR Value BS170
SYMBOL npn 144 32 M90
SYMATTR InstName Q1
SYMBOL res 64 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 2Meg
SYMBOL res 400 112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 500k
SYMBOL res 400 -32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 2Meg
SYMBOL res 432 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RLoad
SYMATTR Value {RLoad}
SYMBOL diode -16 224 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode -80 368 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL voltage -464 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=50m
SYMATTR InstName V1
SYMATTR Value PULSE(0 {VBatt} 1 1p 1p 1 2)
SYMBOL voltage -464 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=50m
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 0 1p 1p 2 4)
SYMBOL cap 272 448 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL cap 368 448 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res 224 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL zener -16 192 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D3
SYMATTR Value ZD3V3
SYMBOL diode 304 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
TEXT -312 424 Left 2 !.param RLoad=1k\n.param VBatt=9\n.tran 0 4 0 10m
TEXT -440 272 Left 2 ;Could use zener as voltage regulator
TEXT -288 504 Left 2 !.model BS170 ako:BSS123 Vto=2.1\n.model ZD3V3 ako:1N750 bv=3.3 vpk=3.3
